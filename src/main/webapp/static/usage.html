<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF8">
  <title>Widget usage diagram</title>

  <!-- JQuery -->
  <script type="text/javascript" src="bower_components/jquery/dist/jquery.min.js"></script>
  <script type="text/javascript" src="bower_components/jquery-ui/jquery-ui.min.js"></script>
  <!-- For the slider -->
  <link rel="stylesheet" href="bower_components/jquery-ui/themes/base/jquery-ui.min.css">

  <!-- Bootstrap -->
  <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap-theme.css">
  <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

  <!-- Vis.js -->
  <script type="text/javascript" src="bower_components/vis/dist/vis.min.js"></script>
  <link type="text/css" rel="stylesheet" href="bower_components/vis/dist/vis.min.css">

  <!-- Bootstrap Datetimepicker & Moment.js dependency-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.37/css/bootstrap-datetimepicker.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.11.2/moment.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.37/js/bootstrap-datetimepicker.min.js"></script>

  <script type="text/javascript" src="js/commons.js"></script>

  <!-- Main chart -->
  <script type="text/javascript" src="js/chart.js"></script>
  <style type="text/css">
    #networkMap {
      /*width: 800px;*/
      height: 500px;
      border: 1px solid lightgray;
    }

    #show-info {
        display: none;
        margin-top: 20px;
    }

    #slider-levels {
        width: 400px;
        margin: 0 0 30px 20px;
    }

    pre {
      padding: 5px;
      margin: 5px;
    }

    .string {
      color: green;
    }

    .number {
      color: darkorange;
    }

    .boolean {
      color: blue;
    }

    .null {
      color: magenta;
    }

    .key {
      color: red;
    }
  </style>

  <script type="text/javascript">
      $(function() {
          chart.create(3);
          var sessionId = queryParameter.get('session');
          if (sessionId!=null) {
              chart.load('../data/usage/' + sessionId);
          } else {
              chart.load('../data/usage?' + queryParameter.all());
          }
          $('#show-last').attr('checked', false);  // Make sure that at the beginning is unchecked.
          $('#show-last').change(function() {
              if($(this).is(":checked")) {
                  chart.filterLast();
              } else {
                  chart.filterNone();
              }
          });
      });
  </script>
</head>

<body>
  <div class="container">
    <h1>PT widget usage</h1>

    <div class="row">
      <div id="show-info" class="col-md-12">
          <p>Number of levels shown in the chart: <span class="number-levels"></span>.</p>
          <div id="slider-levels"></div>

          <p>Show latest session only: <input id="show-last" type="checkbox"><p>

          <p>Notes about the chart:</p>
          <ul>
            <li>If a session has less than <span class="number-levels"></span> steps, NOOP state will be selected for the remaining levels.</li>
            <li>If a session has more than <span class="number-levels"></span> steps, the remaining ones will be ignored.</li>
            <li>The final state is selected randomly.</li>
            <li>The actions have not been divided to consider the type of devices created/deleted/modified to avoid too many states.</li>
          </ul>
      </div>
    </div>

    <div class="row">
      <div id="networkMap"></div>
    </div>

    <div id="errorDialog" class="modal fade" tabindex="-1" role="dialog">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Error loading data</h4>
          </div>
          <div class="modal-body">
            <p></p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
  </div>
</body>
</html>

