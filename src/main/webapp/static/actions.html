<!DOCTYPE html>
<html>
<head>
      <meta http-equiv="content-type" content="text/html; charset=UTF8">
      <title>PTAnywhere widget usage: sessions per number of activities</title>

      <!-- JQuery -->
      <script type="text/javascript" src="bower_components/jquery/dist/jquery.min.js"></script>

      <!-- Bootstrap -->
      <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
      <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap-theme.css">
      <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

      <!-- Bootstrap Datetimepicker & Moment.js dependency-->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.37/css/bootstrap-datetimepicker.min.css">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.11.2/moment.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.37/js/bootstrap-datetimepicker.min.js"></script>

      <script type="text/javascript" src="js/commons.js"></script>

      <!-- Chart.js -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.min.js"></script>


      <script type="text/javascript">

            function createLabels(steps) {
                var ret = [];
                for (var i=1; i<=steps; i++) {
                    ret.push(i);
                }
                return ret;
            }

            function createChart(chartId, data) {
                var ctx = document.getElementById(chartId).getContext("2d");
                var data = {
                    labels: createLabels(data.length),
                    datasets: [
                        {
                            label: "Actions per session",
                            fillColor: "rgba(151,187,205,0.7)",
                            strokeColor: "rgba(151,187,205,0.8)",
                            highlightFill: "rgba(151,187,205,0.9)",
                            highlightStroke: "rgba(151,187,205,1)",
                            data: data
                        }
                    ]
                };
                var options = {
                    responsive: true,
                    barShowStroke: false,
                    barValueSpacing: 0,
                    barValueSpacing: 0
                };
                return new Chart(ctx).Bar(data, options);
            }


            $(function() {
                $.getJSON('../data/sessions/actions?' + queryParameter.all())
                    .done(function(values) {
                        myBarChart.destroy();
                        myBarChart = createChart('myChart', values);
                        console.log(histogram);
                    });
                var fakeData = [65, 59, 80, 81, 56, 55, 40, 41];
                var myBarChart = createChart('myChart', fakeData);
            });
      </script>
</head>
<body>
<div class="container">
    <h1>Sessions per number of activities</h1>

    <div class="row" style="margin-top: 5%;">
      <canvas id="myChart" style="width: 100%; height: 400px;"></canvas>
    </div>
</div>
</body>
</html>
